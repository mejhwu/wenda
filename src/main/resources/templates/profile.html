<!DOCTYPE html>
<!-- saved from url=(0030)#signin -->
<html lang="zh-CN" dropeffect="none"
      class="js is-AppPromotionBarVisible cssanimations csstransforms csstransitions flexbox no-touchevents no-mobile"
      style="" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script async="" src="../scripts/ga.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-ZA-Response-Id" content="46acde5c53db46f2806ccad726de9826">
    <title>首页 - 问答</title>
    <meta name="apple-itunes-app" content="app-id=432274380">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="mobile-agent" content="format=html5;url=https://nowcoder.com/">
    <meta id="znonce" name="znonce" content="d3edc464cf014708819feffde7ddd01e">
    <link rel="search" type="application/opensearchdescription+xml" href="https://nowcoder.com/static/search.xml"
          title="牛客">
    <link rel="stylesheet" href="../styles/bootstrap.min.css">
    <link rel="stylesheet" href="../styles/index.css">
    <link rel="stylesheet" href="../styles/detail.css">
    <style>
        .zm-item-answer-author-info a.collapse {
            margin-top: 0
        }
    </style>

</head>
<body class="zhi ">
<div th:replace="header::header"></div>
<div class="zg-wrap zu-main clearfix " role="main">
    <div class="zm-profile-section-wrap zm-profile-followee-page">
        <div class="zm-profile-section-head">
            <span th:text="${profileUser.name}"></span>
            <br>
                    <span class="zm-profile-section-name">
                        <a id="followee-count" th:href="@{'/followees/' + ${profileUser.id}}" th:text="'关注' + ${followeeCount} + '人'">关注 0 人</a>
                    </span>
            <br>
            <span class="zm-profile-section-name">
                        <a id="follower-count" th:href="@{'/followers/' + ${profileUser.id}}" th:text="'粉丝' + ${followerCount} + '人'"> 粉丝 0 人</a>
                    </span>
            <div class="zg-right">
                <button th:if="${followed==true}" class="zg-btn zg-btn-follow zm-rich-follow-btn small nth-0
                                    js-follow-user" data-status="1" th:attr="data-id=${profileUser.id}">取消关注
                </button>
                <button th:if="${followed == null || followed==false}" class="zg-btn zg-btn-follow zm-rich-follow-btn small nth-0
                                    js-follow-user" th:attr="data-id=${profileUser.id}">关注
                </button>
            </div>
        </div>
        <div class="zu-main-content">
            <div class="zu-main-content-inner">
                <div class="zg-section" id="zh-home-list-title">
                    <i class="zg-icon zg-icon-feedlist"></i>最新评论
                    <!--<span class="zg-right zm-noti-cleaner-setting" style="list-style:none">
                        <a href="https://nowcoder.com/settings/filter" class="zg-link-gray-normal">
                            <i class="zg-icon zg-icon-settings"></i>设置
                        </a>
                    </span>-->
                </div>
                <div class="zu-main-feed-con navigable" data-feedtype="topstory" id="zh-question-list">
                    <div id="js-home-feed-list" class="zh-general-list topstory clearfix">

                        <div th:each="vo:${vos}" class="feed-item folding feed-item-hook feed-item-2
                        " feed-item-a="" data-type="a" id="feed-2" data-za-module="FeedItem" data-za-index="">
                            <meta itemprop="ZReactor" data-id="389034" data-meta="">
                            <div class="feed-item-inner">
                                <div class="avatar">
                                    <a title="$!{vo.get('user').name}" data-tip="p$t$amuro1230" class="zm-item-link-avatar"
                                       target="_blank" href="https://nowcoder.com/people/amuro1230">
                                        <img th:src="@{${vo.get('user').headUrl}}" class="zm-item-img-avatar"></a>
                                </div>
                                <div class="feed-main">
                                    <div class="feed-content" data-za-module="AnswerItem">
                                        <meta itemprop="answer-id" content="389034">
                                        <meta itemprop="answer-url-token" content="13174385">
                                        <h2 class="feed-title">
                                            <a class="question_link" target="_blank"
                                               th:href="@{'/question/' + ${vo.get('question').id}}"
                                               th:text="${vo.get('question').title}">$!{vo.question.title}</a></h2>
                                        <div class="feed-question-detail-item">
                                            <div class="question-description-plain zm-editable-content"></div>
                                        </div>
                                        <div class="expandable entry-body">
                                            <!--<div class="zm-item-vote">
                                                <a class="zm-item-vote-count js-expand js-vote-count" href="javascript:;" data-bind-votecount="" th:text="${vo.likeCount}">${vo.likeCount}</a></div>-->
                                            <div class="zm-item-answer-author-info">
                                                <a class="author-link" data-tip="p$b$amuro1230" target="_blank"
                                                   th:href="@{'/user/' + ${vo.get('user').id}}" th:text="${vo.get('user').name}"></a>
                                                ，<span
                                                    th:text="${#dates.format(vo.get('comment').createdDate, 'yyyy-MM-dd HH:mm')}"></span>
                                            </div>
                                            <div class="zm-item-vote-info" data-votecount="4168"
                                                 data-za-module="VoteInfo">
                                                <span class="voters text">
                                                    <a href="#" class="more text">
                                                        <span class="js-voteCount"></span>&nbsp;人赞同</a></span>
                                            </div>
                                            <div class="zm-item-rich-text expandable js-collapse-body"
                                                 data-resourceid="123114" data-action="/answer/content"
                                                 data-author-name="李淼"
                                                 data-entry-url="/question/19857995/answer/13174385">
                                                <div class="zh-summary summary clearfix"
                                                     th:text="${vo.get('comment').content}"></div>
                                            </div>
                                        </div>
                                        <div class="feed-meta">
                                            <div class="zm-item-meta answer-actions clearfix js-contentActions">
                                                <div class="zm-meta-panel">

                                                    <a href="#" name="addcomment"
                                                       class="meta-item toggle-comment js-toggleCommentBox">
                                                        <i class="z-icon-comment"></i><span
                                                            th:text="${vo.get('question').commentCount} + ' 条评论'"></span></a>


                                                    <button class="meta-item item-collapse js-collapse">
                                                        <i class="z-icon-fold"></i>收起
                                                    </button>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="javascript:;" id="zh-load-more" class="zg-btn-white zg-r3px zu-button-more">更多</a>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="/scripts/main/jquery.js"></script>
<script type="text/javascript" src="/scripts/main/base/base.js"></script>
<script type="text/javascript" src="/scripts/main/base/util.js"></script>
<script type="text/javascript" src="/scripts/main/base/event.js"></script>
<script type="text/javascript" src="/scripts/main/util/action.js"></script>
<script type="text/javascript" src="/scripts/main/component/component.js"></script>
<script type="text/javascript" src="/scripts/main/component/popup.js"></script>
<script type="text/javascript" src="/scripts/main/component/popupAdd.js"></script>
<script type="text/javascript" src="/scripts/main/component/popupMsg.js"></script>
<script>
    $(function () {
        $('.zg-btn').on('click', function () {
            var $btn = $(this);
            var data = {
                "userId" : $(this).attr('data-id')
            }
            var url = null;
            if ($(this).html().trim() == '关注') {
                url = '/followUser';
            } else {
                url = '/unfollowUser';
            }

            $.ajax({
                url : url,
                type : 'post',
                data : data,
                success : function (dat) {
                    var json = JSON.parse(dat);
                    console.log(json); //TODO
                    console.log(json.code); //TODO
                    if (json.code == 0) {
                        if ($btn.html().trim() == '关注') {
                            $btn.html('取消关注');
                        } else {
                            $btn.html('关注');
                        }
                        var c = '粉丝' + json.msg + '人';
                        $('#follower-count').html(c);
                    }
                }
            });
        });
    });
</script>
</body>
</html>