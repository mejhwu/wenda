<!DOCTYPE html>
<!-- saved from url=(0030)#signin -->
<html lang="zh-CN" dropeffect="none"
      class="js is-AppPromotionBarVisible cssanimations csstransforms csstransitions flexbox no-touchevents no-mobile"
      style="" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script async="" src="../scripts/ga.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-ZA-Response-Id" content="46acde5c53db46f2806ccad726de9826">
    <title>首页 - 问答</title>
    <meta name="apple-itunes-app" content="app-id=432274380">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="mobile-agent" content="format=html5;url=https://nowcoder.com/">
    <meta id="znonce" name="znonce" content="d3edc464cf014708819feffde7ddd01e">
    <link rel="search" type="application/opensearchdescription+xml" href="https://nowcoder.com/static/search.xml" title="牛客">
    <link rel="stylesheet" href="../styles/bootstrap.min.css">
    <link rel="stylesheet" href="../styles/index.css">
    <link rel="stylesheet" href="../styles/detail.css">
    <style>
        .zm-item-answer-author-info a.collapse {margin-top: 0}
    </style>

</head>
<body class="zhi ">
<div th:replace="header::header"></div>
<div class="zg-wrap zu-main clearfix with-indention-votebar" itemscope="" itemtype="http://schema.org/Question"
     id="zh-single-question-page" data-urltoken="36301524" role="main">
    <div class="zu-main-content">
        <div class="zu-main-content-inner">
            <meta itemprop="isTopQuestion" content="false">
            <meta itemprop="visitsCount" content="402">
            <!--
            <div class="zm-tag-editor zg-section">
                <div class="zm-tag-editor-labels zg-clear">
                    <a data-tip="t$b$19550730" class="zm-item-tag" href="">新浪微博</a>
                    <a data-tip="t$b$19554412" class="zm-item-tag" href="">网络营销</a>
                    <a data-tip="t$b$19559739" class="zm-item-tag" href="">微博粉丝</a>
                    <a data-tip="t$b$19560290" class="zm-item-tag" href="">僵尸粉</a>
                    <a data-tip="t$b$19565757" class="zm-item-tag" href="">网络水军</a>
                    <a href="javascript:;" class="zu-edit-button" name="edit">
                        <i class="zu-edit-button-icon"></i>修改</a>
                </div>
            </div>
            -->
            <div id="zh-question-title" data-editable="true" class="zm-editable-status-normal">
                <h2 class="zm-item-title">

                    <span class="zm-editable-content" th:text="${question.title}"></span>

                </h2>
            </div>
            <div id="zh-question-detail" class="zm-item-rich-text zm-editable-status-normal">
                <div class="zm-editable-content" th:text="${question.content}"></div>
            </div>
            <div class="zm-side-section">
                <div class="zm-side-section-inner" id="zh-question-side-header-wrap">
                    <button data-follow="q:m:button" class="follow-button zg-follow zg-btn-green"
                            th:attr="data-id=${question.id}" th:if="${isFollow == null || isFollow == false}">
                        关注问题
                    </button>
                    <button data-follow="q:m:button" class="follow-button zg-follow zg-btn-green"
                            th:attr="data-id=${question.id}" th:if="${isFollow == true}">
                        取消关注
                    </button>
                    <div class="zh-question-followers-sidebar">
                        <div class="zg-gray-normal">
                            <a href="">
                                <strong id="question-follower-count" th:text="${followerCount}">9</strong>人关注该问题</a>
                            &nbsp;&nbsp;
                            <a href="#">
                                <strong id="question-comment-count" th:text="${question.commentCount}">9</strong>人评论该问题</a>
                        </div>
                    </div>
                </div>
            </div>
            <div id="zh-question-answer-wrap" data-pagesize="10" class="zh-question-answer-wrapper navigable"
                 data-widget="navigable" data-navigable-options="{&quot;items&quot;: &quot;&gt;.zm-item-answer&quot;}"
                 data-init="{&quot;params&quot;: {&quot;url_token&quot;: 36301524, &quot;pagesize&quot;: 10, &quot;offset&quot;: 0}, &quot;nodename&quot;: &quot;QuestionAnswerListV2&quot;}">


                <div th:each="vo:${comments}" tabindex="-1" class="zm-item-answer  zm-item-expanded" itemprop="topAnswer" itemscope=""
                     itemtype="http://schema.org/Answer" data-aid="22162611" data-atoken="66862039" data-collapsed="0"
                     data-created="1444310527" data-deleted="0" data-helpful="1" data-isowner="0" data-copyable="1"
                     data-za-module="AnswerItem">
                    <link itemprop="url" href="">
                    <meta itemprop="answer-id" content="22162611">
                    <meta itemprop="answer-url-token" content="66862039">
                    <a class="zg-anchor-hidden" name="answer-22162611"></a>
                    <div class="zm-votebar goog-scrollfloater" data-za-module="VoteBar">
                        <button class="up" aria-pressed="false" title="赞同">
                            <input type="hidden" th:value="${vo.comment.id}">
                            <i class="icon vote-arrow"></i>
                            <span class="count" th:text="${vo.likeCount}" th:attr="data-id=${vo.comment.id}">28</span>
                            <span class="label sr-only">赞同</span></button>
                        <button class="down" aria-pressed="false" title="反对，不会显示你的姓名">
                            <input type="hidden" th:value="${vo.comment.id}">
                            <i class="icon vote-arrow"></i>
                            <span class="label sr-only">反对，不会显示你的姓名</span></button>
                    </div>
                    <div class="answer-head">
                        <div class="zm-item-answer-author-info">
                            <a class="zm-item-link-avatar avatar-link" href="" target="_blank"
                               data-tip="p$t$yingxiaodao">
                                <img src="$comment.user.headUrl" th:src="@{${vo.user.headUrl}}"
                                     class="zm-list-avatar avatar"></a>
                            <a class="author-link" target="_blank" th:href="@{'/user/' + ${vo.user.id}}" href="/user/$comment.user.id" th:text="${vo.user.name}">$comment.user.name</a>
                            </div>
                        <div class="zm-item-vote-info" data-votecount="28" data-za-module="VoteInfo">
                                <span class="voters text">
                                    <a href="" class="more text">
                                        <span class="js-voteCount" th:text="${vo.likeCount}">28</span>&nbsp;人赞同</a></span>
                        </div>
                    </div>
                    <div class="zm-item-rich-text expandable js-collapse-body" data-resourceid="6727688"
                         data-action="/answer/content" data-author-name="营销岛"
                         data-entry-url="/question/36301524/answer/66862039">
                        <div class="zm-editable-content clearfix" th:text="${vo.comment.content}">
                            $comment.comment.content
                        </div>
                    </div>
                    <a class="zg-anchor-hidden ac" name="22162611-comment"></a>
                    <div class="zm-item-meta answer-actions clearfix js-contentActions">
                        <div class="zm-meta-panel">
                            <a itemprop="url" class="answer-date-link meta-item" target="_blank" href=""
                               th:text="'发布于' + ${#dates.format(vo.comment.createdDate, 'yyyy-MM-dd HH:mm')}">发布于
                                $date.format('yyyy-MM-dd HH:mm:ss', $comment.comment.createdDate)</a>

                            <!--
                            <a href="" name="addcomment" class="meta-item toggle-comment js-toggleCommentBox">
                                <i class="z-icon-comment"></i>4 条评论</a>
                            <a href="" class="meta-item zu-autohide js-thank" data-thanked="false">
                                <i class="z-icon-thank"></i>感谢</a>

                            <button class="item-collapse js-collapse" style="transition: none;">
                                <i class="z-icon-fold"></i>收起
                            </button>
                            -->
                        </div>
                    </div>
                </div>

            </div>
            <a name="draft"></a>
            <form action="/comment/add" method="post" id="commentform">
                <input type="hidden" name="questionId" th:value="${question.id}"/>
            <div id="zh-question-answer-form-wrap" class="zh-question-answer-form-wrap">
                <div class="zm-editable-editor-wrap" style="">
                    <div class="zm-editable-editor-outer">
                        <div class="zm-editable-editor-field-wrap">
                            <textarea name="content" id="content" class="zm-editable-editor-field-element editable" style="font-style: italic;width:100%;"></textarea>
                        </div>
                    </div>

                    <div class="zm-command clearfix">
                            <span class=" zg-right">
                                <button type="submit" class="submit-button zg-btn-blue">发布回答</button></span>
                    </div>
                </div>
            </div>
            </form>

        </div>
    </div>
</div>
<script type="text/javascript" src="/scripts/main/jquery.js"></script>
<script type="text/javascript" src="/scripts/main/base/base.js"></script>
<script type="text/javascript" src="/scripts/main/base/util.js"></script>
<script type="text/javascript" src="/scripts/main/base/event.js"></script>
<script type="text/javascript" src="/scripts/main/util/action.js"></script>
<script type="text/javascript" src="/scripts/main/util/business.js"></script>
<script type="text/javascript" src="/scripts/main/component/component.js"></script>
<script type="text/javascript" src="/scripts/main/component/popup.js"></script>
<script type="text/javascript" src="/scripts/main/component/popupAdd.js"></script>
<script type="text/javascript" src="/scripts/main/component/popupMsg.js"></script>
<script type="text/javascript" src="/scripts/main/site/home.js"></script>
<script type="text/javascript" src="/scripts/main/site/detail.js"></script>
<script type="text/javascript" src="/scripts/main/site/follow.js"></script>
<script type="text/javascript" src="/scripts/main/site/profile.js"></script>
<script>
    $(function () {
        $('button[class="up"]').on('click', function () {
            var commentId = $(this).children("input").val();
            var $btn = $(this);
            var data = {
                "commentId" : commentId
            }
            $.ajax({
                url:'/like',
                type:'post',
                data:data,
                success:function (d) {
                    var data = JSON.parse(d);
                    if (data.code == 0) {
                        $btn.children('span[class="count"]').html(data.msg);
                    }

                }
            });
        }) ;
        $('button[class="down"]').on('click', function () {
            var commentId = $(this).children('input').val();
            var $btn = $(this);
            var data = {
                "commentId" : commentId
            }
            $.ajax({
                url:'/dislike',
                type:'post',
                data:data,
                success:function (d) {
                    var data = JSON.parse(d);
                    if (data.code == 0) {
                        $btn.prev().children('span[class="count"]').html(data.msg);
                    }

                }
            });
        });
        $('.follow-button').on('click', function () {
            var $btn = $(this);
            var data = {
                "questionId" : $(this).attr('data-id')
            }
            var url = null;
            if ($(this).html().trim() == '关注问题') {
                url = '/followQuestion';
            } else {
                url = '/unfollowQuestion';
            }

            $.ajax({
                url : url,
                type : 'post',
                data : data,
                success : function (dat) {
                    var json = JSON.parse(dat);
                    console.log(json); //TODO
                    console.log(json.code); //TODO
                    if (json.code == 0) {
                        if ($btn.html().trim() == '关注问题') {
                            $btn.html('取消关注');
                        } else {
                            $btn.html('关注问题');
                        }

                        $('#question-follower-count').html(json.msg);
                    }
                }
            });
        });
    });
</script>
</body>
</html>